<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[J2hongming Blog]]></title>
  <link href="http://j2hongming.github.io/atom.xml" rel="self"/>
  <link href="http://j2hongming.github.io/"/>
  <updated>2016-07-20T17:48:34+08:00</updated>
  <id>http://j2hongming.github.io/</id>
  <author>
    <name><![CDATA[HongMing ChangChine]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Inno Setup With Wine in Linux]]></title>
    <link href="http://j2hongming.github.io/blog/2016/07/20/inno-setup-with-wine-in-linux/"/>
    <updated>2016-07-20T17:16:45+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/07/20/inno-setup-with-wine-in-linux</id>
    <content type="html"><![CDATA[<ul>
<li>安裝紅酒(wine)</li>
<li>測試紅酒(wine)</li>
<li>安裝Inno Setup</li>
<li>執行exe, cmd</li>
<li>參考資源</li>
</ul>


<!-- more -->


<h2>安裝紅酒(wine)</h2>

<h3>Ubuntu 14.04</h3>

<pre><code>sudo apt-get install wine
</code></pre>

<h3>Cent OS 6.5</h3>

<pre><code>yum install epel-release
yum install wine
</code></pre>

<p>目前CentOS使用手動make尚未成功</p>

<h2>測試紅酒(wine)</h2>

<pre><code>wine --version
# 下載putty.exe測試
wine putty.exe
</code></pre>

<h2>安裝Inno Setup</h2>

<p>下載<a href="http://www.jrsoftware.org/isdl.php">Inno Setup QuickStart Pack</a></p>

<pre><code>wget http://www.jrsoftware.org/download.php/ispack.exe
wine ispack.exe
</code></pre>

<p>安裝完成後Inno Setup會出現在~/.wine/drive_c/Program Files (x86)/Inno Setup 5
<a href="http://unix.stackexchange.com/questions/40492/change-directory-with-space-followed-by">cd到Program Files (x86)的方式</a></p>

<h2>執行exe, cmd</h2>

<p>下載大神做好的<a href="https://gist.githubusercontent.com/derekstavis/8288379/raw/f8f1f7ef290d4116cc30ec341e6b8e996cf8e602/iscc">iscc</a>放在可執行的目錄或是自己加到$PATH</p>

<pre><code>echo $PATH
# 自己加到$PATH,關掉Terminal後就會失效，下一次需要重新加入
export PATH=$PATH:~/bin/my
# 測試iscc
iscc myScript.iss
</code></pre>

<h2>參考資源</h2>

<ul>
<li><a href="http://tecadmin.net/steps-install-wine-centos-rhel-fedora-systems/">How To Install Wine 1.9.9 (Development Release) on CentOS, RHEL &amp; Fedora</a></li>
<li><a href="https://www.youtube.com/watch?v=Ds3Y9thewNQ">How to Install &amp; Configure Wine 1.7.34 on RHEL/CentOS 6/7 and Fedora 23/22/21 - Desktop</a></li>
<li><a href="http://derek.nodeconf.org/posts/creating-a-installer-using-inno-setup-on-linux-and-mac-os-x/">CREATING A INSTALLER USING INNO SETUP ON LINUX AND MAC OS X</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[客製化Drupal原生下拉式選單]]></title>
    <link href="http://j2hongming.github.io/blog/2016/06/16/customize-drupal-origin-selectlist/"/>
    <updated>2016-06-16T23:20:31+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/06/16/customize-drupal-origin-selectlist</id>
    <content type="html"><![CDATA[<div><script src='https://gist.github.com/f4fe361e7f0c3f83e796b006b8f4cbeb.js'></script>
<noscript><pre><code>/**
 * origin selectlist display:
 * A
 * B
 * C
 * -----
 * customized selectlist display:
 * 100 A
 * 200 B
 * 300 C
 */
function hook_field_widget_form_alter(&amp;$element, &amp;$form_state, $context){

  if($element['#bundle'] == 'article' &amp;&amp; $element['#field_name'] == 'field_code_name'){
    $new_code_name = array();
    foreach ($element['#options'] as $key =&gt; $value) {
      $term_obj = taxonomy_term_load($key);
      $new_code_name[$key] = $term_obj-&gt;field_code_id['und'][0]['safe_value'].' '.$value;
    }
    
    $element['#options'] = $new_code_name;
  }
}</code></pre></noscript></div>



]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[No Access-Control-Allow-Origin Header Is Present on the Requested Resource]]></title>
    <link href="http://j2hongming.github.io/blog/2016/04/28/no-access-control-allow-origin-header-is-present-on-the-requested-resource/"/>
    <updated>2016-04-28T11:25:22+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/04/28/no-access-control-allow-origin-header-is-present-on-the-requested-resource</id>
    <content type="html"><![CDATA[<ul>
<li>問題描述</li>
<li>本質</li>
<li>解法</li>
</ul>


<!-- more -->


<h2>問題描述</h2>

<p>使用jQuery AJAX發出Request時，console出現No &lsquo;Access-Control-Allow-Origin&rsquo; header is present on the requested resource</p>

<figure class='code'><figcaption><span>CORS.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span><span class='line'><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;</span>
</span><span class='line'><span class="c1">// ERROR, and show error message in console </span>
</span><span class='line'><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s2">&quot;http://data.tycg.gov.tw/api/v1/rest/datastore/a1b4714b-3b75-4ff8-a8f2-cc377e4eaa0f?format=json&quot;</span><span class="p">;</span>
</span><span class='line'><span class="c1">// SUCCESS</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="s1">&#39;http://ptx.transportdata.tw/MOTC/v1/Bus/EstimatedTimeOfArrival/Thb?%24format=json&amp;$top=10&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class='line'>   <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;JSON&quot;</span><span class="p">,</span>
</span><span class='line'>   <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">textStatus</span><span class="p">,</span> <span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>     <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;SUCCESS!!!&quot;</span><span class="p">);</span>
</span><span class='line'>     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span><span class='line'>   <span class="p">},</span>
</span><span class='line'>   <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>     <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;ERROR!!!&quot;</span><span class="p">);</span>
</span><span class='line'>   <span class="p">}</span>
</span><span class='line'> <span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<div><script src='https://gist.github.com/89c858fdf4fd510fd910787a64eb9f04.js?file=CORS.js'></script>
<noscript><pre><code>&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// ERROR, and show error message in console 
var url = &quot;http://data.tycg.gov.tw/api/v1/rest/datastore/a1b4714b-3b75-4ff8-a8f2-cc377e4eaa0f?format=json&quot;;
// SUCCESS
var url = 'http://ptx.transportdata.tw/MOTC/v1/Bus/EstimatedTimeOfArrival/Thb?%24format=json&amp;$top=10';

$.ajax({
   url: url,
   type: &quot;GET&quot;,
   dataType: &quot;JSON&quot;,
   success: function(data, textStatus, request) {
     alert(&quot;SUCCESS!!!&quot;);
     console.log(data);
   },
   error: function() {
     alert(&quot;ERROR!!!&quot;);
   }
 });

&lt;/script&gt;</code></pre></noscript></div>


<h2>本質</h2>

<p>基於同源策略(Same-origin policy)所形成的議題
根據MDN所描述，同源的定義必須<code>protocol</code>, <code>host</code>, <code>port</code>相同
所以若要取得不同網域的資源會受到限制。</p>

<h2>解法</h2>

<p>HTTP response header加上<code>Access-Control-Allow-Origin</code>屬性，若有機會碰到Server端的前提下。</p>

<p>使用JSONP溝通，Client端和Server端都要支援。</p>

<p>JQuery降版到1.4，只能動到Client端，Server端是別人家的。</p>

<h2>Ref.</h2>

<ul>
<li><a href="http://stackoverflow.com/questions/20035101/no-access-control-allow-origin-header-is-present-on-the-requested-resource">No &lsquo;Access-Control-Allow-Origin&rsquo; header is present on the requested resource</a></li>
<li><a href="https://developer.mozilla.org/zh-TW/docs/HTTP/Access_control_CORS">HTTP access control (CORS):MDN</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy">Same-origin policy</a></li>
<li><a href="http://ithelp.ithome.com.tw/question/10094915?tab=opinion">Cross Domain Ajax 跨網域抓取資料(JSONP)</a></li>
<li><a href="http://stackoverflow.com/questions/10507345/ajax-and-jsonp-parseerror-and-uncaught-syntaxerror-unexpected-token">$.ajax and JSONP. ParseError and Uncaught SyntaxError: Unexpected token :</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Get Field Names of Content Type in Drupal]]></title>
    <link href="http://j2hongming.github.io/blog/2016/03/31/get-field-names-of-content-type-in-drupal/"/>
    <updated>2016-03-31T13:30:28+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/03/31/get-field-names-of-content-type-in-drupal</id>
    <content type="html"><![CDATA[<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="sd">/**</span>
</span><span class='line'><span class="sd">* 取得ContentType的field name</span>
</span><span class='line'><span class="sd">* @see </span>
</span><span class='line'><span class="sd">* @link http://drupal.stackexchange.com/questions/39850/get-all-fields-for-a-given-content-type-including-title</span>
</span><span class='line'><span class="sd">*/</span>
</span><span class='line'>
</span><span class='line'><span class="k">function</span> <span class="nf">modulename_get_field_name</span><span class="p">(</span><span class="nv">$content_type</span><span class="p">){</span>
</span><span class='line'>
</span><span class='line'>            <span class="nv">$fields</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
</span><span class='line'>            <span class="nv">$field_map</span> <span class="o">=</span> <span class="nx">field_info_field_map</span><span class="p">();</span>
</span><span class='line'>            <span class="nv">$instances</span> <span class="o">=</span> <span class="nx">field_info_instances</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">,</span> <span class="nv">$content_type</span><span class="p">);</span>
</span><span class='line'>            <span class="nv">$extra_fields</span> <span class="o">=</span> <span class="nx">field_info_extra_fields</span><span class="p">(</span><span class="s1">&#39;node&#39;</span><span class="p">,</span> <span class="nv">$content_type</span><span class="p">,</span> <span class="s1">&#39;form&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// Fields.</span>
</span><span class='line'>            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$instances</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$instance</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nv">$field</span> <span class="o">=</span> <span class="nx">field_info_field</span><span class="p">(</span><span class="nv">$instance</span><span class="p">[</span><span class="s1">&#39;field_name&#39;</span><span class="p">]);</span>
</span><span class='line'>              <span class="nv">$fields</span><span class="p">[</span><span class="nv">$instance</span><span class="p">[</span><span class="s1">&#39;field_name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>                <span class="s1">&#39;field_name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">&#39;field_name&#39;</span><span class="p">],</span>
</span><span class='line'>                <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">],</span>
</span><span class='line'>                <span class="s1">&#39;weight&#39;</span> <span class="o">=&gt;</span> <span class="nv">$instance</span><span class="p">[</span><span class="s1">&#39;widget&#39;</span><span class="p">][</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span>
</span><span class='line'>                <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="nv">$field_map</span><span class="p">[</span><span class="nv">$instance</span><span class="p">[</span><span class="s1">&#39;field_name&#39;</span><span class="p">]][</span><span class="s1">&#39;type&#39;</span><span class="p">],</span>
</span><span class='line'>              <span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>            <span class="c1">// Non-field elements. ex. title</span>
</span><span class='line'>            <span class="k">foreach</span> <span class="p">(</span><span class="nv">$extra_fields</span> <span class="k">as</span> <span class="nv">$name</span> <span class="o">=&gt;</span> <span class="nv">$extra_field</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nv">$fields</span><span class="p">[</span><span class="nv">$name</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>                <span class="s1">&#39;title&#39;</span> <span class="o">=&gt;</span> <span class="nv">$extra_field</span><span class="p">[</span><span class="s1">&#39;label&#39;</span><span class="p">],</span>
</span><span class='line'>                <span class="s1">&#39;weight&#39;</span> <span class="o">=&gt;</span> <span class="nv">$extra_field</span><span class="p">[</span><span class="s1">&#39;weight&#39;</span><span class="p">],</span>
</span><span class='line'>              <span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">return</span> <span class="nv">$fields</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Drupal Development Resources]]></title>
    <link href="http://j2hongming.github.io/blog/2016/03/31/drupal-development-resources/"/>
    <updated>2016-03-31T11:39:48+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/03/31/drupal-development-resources</id>
    <content type="html"><![CDATA[<ul>
<li>Concepts</li>
<li>Tools</li>
<li>Nice Modules and API</li>
<li>Code Snippet</li>
</ul>


<!-- more -->


<h2>Concepts</h2>

<p><a href="https://www.drupal.org/documentation/develop">Develop for Drupal</a></p>

<h2>Tools</h2>

<p><a href="https://www.drupal.org/node/147789">Development tools</a></p>

<h2>Nice Modules and API</h2>

<ul>
<li>Form Handling</li>
<li>Cron Jobs</li>
<li>Batch Processing</li>
<li>Send Mail</li>
</ul>


<h3>Form Handling</h3>

<p><a href="https://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7">Durpal Form API</a></p>

<h3>Cron Jobs</h3>

<p><a href="https://www.drupal.org/project/elysia_cron">Elysia Cron</a></p>

<h3>Batch Processing</h3>

<p><a href="http://j2hongming.github.io/blog/2016/03/28/batch-api-notes/">Batch API</a></p>

<h3>Send Mail</h3>

<p><a href="https://www.drupal.org/project/smtp">SMTP Authentication Support</a></p>

<h2>Code Snippet</h2>

<ul>
<li>Entity</li>
<li>Node</li>
<li>Taxonomy</li>
<li>Comment</li>
<li>Field</li>
<li>Field Collection</li>
<li>Block</li>
<li>Theme</li>
<li>Form</li>
<li>Database</li>
<li>Mail</li>
<li>Batch/Oueue</li>
<li>Cron</li>
<li>Cache</li>
<li>Misc.</li>
</ul>


<h3>Entity</h3>

<ul>
<li><a href="https://www.drupal.org/node/1427962">Better examples for entity_metadata_wrapper()</a></li>
<li><a href="http://dropbucket.org/node/1563">Various EntityMetadataWrapper Examples</a></li>
</ul>


<h3>Node</h3>

<ul>
<li><a href="https://anders.unix.se/2011/04/13/guide-to-programmatic-node-creation-in-drupal-7/">Guide to programmatic node creation in Drupal 7</a></li>
<li><a href="https://www.urbaninsight.com/2011/10/24/saving-nodes-fields-without-saving-node-itself">Saving node&rsquo;s fields without saving the node itself</a></li>
</ul>


<h3>Taxonomy</h3>

<ul>
<li><a href="http://www.lightrains.com/blog/programmatically-create-taxonomy-term-drupal">How to programmatically create a taxonomy term in drupal</a></li>
</ul>


<h3>Comment</h3>

<ul>
<li><a href="https://www.drupal.org/node/1030676">How to create comments programmatically in Drupal 7</a></li>
</ul>


<h3>Field</h3>

<ul>
<li><a href="http://j2hongming.github.io/blog/2016/03/31/get-field-names-of-content-type-in-drupal/">Get Field Names of Content Type in Drupal</a></li>
</ul>


<h3>Field Collection</h3>

<ul>
<li><a href="http://audiblecode.com/blog/programmatically-create-and-update-field-collection-item-node-entity-api">Programmatically create and update field collection item for the node with entity API</a></li>
<li><a href="http://cornel.co/article/delete-node-field-collection-items-drupal-7">Delete a node field collection items in Drupal 7</a></li>
<li><a href="http://rapiddg.com/blog/programmatically-adding-field-collection-item-node-drupal">Programmatically Adding a Field Collection Item to a Node in Drupal</a></li>
</ul>


<h3>Block</h3>

<ul>
<li><a href="http://stackoverflow.com/questions/4731420/how-to-insert-a-block-into-a-node-or-template-in-drupal-7">How to insert a block into a node or template in Drupal 7? - Stack Overflow</a></li>
</ul>


<h3>Theme</h3>

<ul>
<li><a href="https://www.drupal.org/node/930760">Render Arrays in Drupal 7</a></li>
<li><a href="https://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_theme/7">hook_theme</a></li>
<li><a href="http://stackoverflow.com/questions/7742203/how-does-hook-theme-work">How does hook_theme() work?</a></li>
<li><a href="https://www.drupal.org/node/933976">Using the theme layer (Drupal 7.x)</a></li>
</ul>


<h3>Form</h3>

<ul>
<li><a href="http://webemania.com/blog/how-to-add-classes-or-attributes-to-drupal-form-elements">How to add classes or attributes to Drupal form elements</a></li>
<li><a href="http://befused.com/drupal/form-validation">http://befused.com/drupal/form-validation</a></li>
</ul>


<h3>Database</h3>

<h3>Mail</h3>

<h3>Batch/Queue</h3>

<h3>Cron</h3>

<h3>Cache</h3>

<ul>
<li><a href="http://www.workhabit.com/blog/using-drupal-cache-your-custom-module-better-performance">Using Drupal Cache In Your Custom Module For Better Performance</a></li>
</ul>


<h3>Misc.</h3>

<ul>
<li><a href="http://befused.com/drupal/print_r-in-drupal_set_message">print_r in drupal_set_message</a></li>
<li><a href="https://www.drupal.org/node/834074">multiple wildcards in hook_menu on same place</a></li>
<li><a href="https://www.drupal.org/node/756722">Managing JavaScript in Drupal 7</a></li>
<li><a href="http://drupal.stackexchange.com/questions/29210/how-do-i-add-javascript-specific-for-a-view">How do I add JavaScript specific for a view?</a></li>
<li><a href="https://www.drupal.org/writing-secure-code">Writing secure code</a></li>
<li><a href="http://www.tekritisoftware.com/restful-web-services-drupal-eight">Accepting POST in Drupal: Customizing RESTful Endpoints</a></li>
<li><a href="http://www.timtoon.com/2009/05/27/customizing-an-rss-feed-using-drupal-and-views/">Customizing an RSS feed using Drupal and Views</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Batch API Notes]]></title>
    <link href="http://j2hongming.github.io/blog/2016/03/28/batch-api-notes/"/>
    <updated>2016-03-28T14:41:34+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/03/28/batch-api-notes</id>
    <content type="html"><![CDATA[<ul>
<li>設定operations</li>
<li>設定batch資訊</li>
<li>設定finish callback function</li>
<li>線上展示</li>
<li>其他批次處理可用模組</li>
</ul>


<!-- more -->


<blockquote><p>Batch sets are used to spread processing (primarily, but not exclusively, forms processing) over several page requests. This helps to ensure that the processing is not interrupted due to PHP timeouts, while users are still able to receive feedback on the progress of the ongoing operations.
<a href="https://api.drupal.org/api/drupal/includes%21form.inc/group/batch/7">Batch operations</a></p></blockquote>

<h2>設定operations</h2>

<p>可依照需求切割一個operation內做的事，假設1000個node，可以一個operation處理一個node或一個operation處理多個node。Client端利用ajax對<a href="https://sitename/batch?id=">https://sitename/batch?id=</a>[batch_id]&amp;op=do發出HttpRequest。</p>

<pre><code>// 假設$data是從EXCEL中讀出的資料

$split_rows = array_chunk($data, 50);

foreach ($split_rows as $key =&gt; $rows) {
  $operations[] = array(
    'import_batch_processing',  // The function to run on 50 row in one operation
    array($rows),  // The rows in the Excel
  );
}
</code></pre>

<h2>設定batch資訊</h2>

<pre><code>$batch = array(
  'title' =&gt; t('批次處理中...'),
  'operations' =&gt; $operations,  // Runs all of the queued processes from the while loop above.
  'file' =&gt; drupal_get_path('module', 'module_name_which_you_create') . '/import_batch_processing.inc',
  'finished' =&gt; 'import_batch_processing_finished', // Function to run when the import is successful
'error_message' =&gt; t('The installation has encountered an error.'),
'progress_message' =&gt; t('資料匯入中...'),
);
</code></pre>

<ul>
<li><code>file</code>: 若import_batch_processing和import_batch_processing_finished沒有定義在.module檔內，需設定有定義這兩個callback function的file。<a href="http://data.agaric.com/batch-api-process-silently-fails-if-function-file-not-default-drupal-bootstrap-isnt-explicitly-inclu">Batch API process silently fails</a></li>
<li><code>finished</code>: batch結束後須執行的callback function</li>
<li><code>error_message</code>:batch過程中若發生錯誤的回傳訊息</li>
<li><code>progress_message</code>: batch過程中顯示的訊息</li>
</ul>


<h2>設定finish callback function</h2>

<pre><code>function import_batch_processing_finished( $success, $results, $operations ){
if($success){
  ...
}
else {
  // An error occurred.
  // $operations contains the operations that remained unprocessed.
  $error_operation = reset($operations);
  drupal_set_message(
    t('An error occurred while processing @operation with arguments : @args',
      array(
        '@operation' =&gt; $error_operation[0],
        '@args' =&gt; print_r($error_operation[0], TRUE),
      )
    )
  );
}
</code></pre>

<h2>線上展示</h2>

<ol>
<li><a href="https://simplytest.me/">Evaluate Drupal projects online</a></li>
<li>安裝模組 Examples for Developers</li>
<li>登入admin帳號後，開啟模組Devel generate和Batch example</li>
<li>前往路徑 admin/config/development/generate/content，新增1000個測試Node</li>
<li>前往路徑 examples/batch_example，開始測試</li>
</ol>


<blockquote><p>可配合程式碼觀察
<a href="http://cgit.drupalcode.org/examples/tree/batch_example/batch_example.module?id=refs/heads;id2=7.x-1.x">Batch example source code</a></p></blockquote>

<h2>其他批次處理可用模組</h2>

<ul>
<li><a href="https://www.drupal.org/project/views_data_export">Views Data Export</a></li>
<li><a href="https://www.drupal.org/project/node_export">Node export</a></li>
</ul>


<h2>Ref.</h2>

<ul>
<li><a href="https://api.drupal.org/api/drupal/includes%21form.inc/group/batch/7">Batch operations</a></li>
<li><a href="https://www.drupal.org/node/180528">how to use the Batch API</a></li>
<li><a href="http://www.jeffgeerling.com/blogs/jeff-geerling/using-batch-api-build-huge-csv">Using Batch API to build huge CSV files for custom exports</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[How to Access Data in Drupal 7]]></title>
    <link href="http://j2hongming.github.io/blog/2016/03/28/how-to-access-data-in-drupal-7/"/>
    <updated>2016-03-28T10:05:52+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/03/28/how-to-access-data-in-drupal-7</id>
    <content type="html"><![CDATA[<ul>
<li>Basic API</li>
<li>Database API

<ul>
<li>Dynamic Query</li>
<li>Static Query</li>
<li>Show Query String and Arguments</li>
</ul>
</li>
<li>EntityFieldQuery</li>
</ul>


<!-- more  -->


<h2>Basic API</h2>

<pre><code>node_load, user_load, taxonomy_term_load, comment_load
主要帶入參數為node id, user_id, term id, comment id
</code></pre>

<h2>Database API</h2>

<h3>Dynamic Query</h3>

<h4>db_select</h4>

<pre><code>$query = db_select('node', 'n');
// access node table, alias is n
</code></pre>

<h4>codition</h4>

<pre><code>$query-&gt;condition($field, $value = NULL, $operator = '=')
// 基本型態

$query-&gt;condition('node.type', array('node_type_name'),'IN');
// 使用In

$query-&gt;condition('node.title',  '%'.db_like($key_word).'%', 'LIKE');
// 使用Like

$query-&gt;where('now() &gt;  TIMESTAMPADD( DAY , 9, FROM_UNIXTIME( field_data_field_timefield.field_timefield_value  ) )');
// 使用where而非condition的寫法

$or = db_or();
$or-&gt;condition('node.title','%'.db_like($key_word).'%', 'LIKE');
$or-&gt;condition('comment.subject','%'.db_like($key_word).'%', 'LIKE');
$query-&gt;condition($or);
// 使用OR連接過濾條件
</code></pre>

<h4>fields, addField</h4>

<p>差別在於是否要使用欄位別名和一次可以存取的欄位數量
    $query->fields(&lsquo;node&rsquo;, array(&lsquo;nid&rsquo;, &lsquo;title&rsquo;));
    // 一次存取多個欄位但無法使用欄位別名</p>

<pre><code>$query-&gt;addField('node','title','node_title');
// 一次存取一個欄位，可以使用欄位別名
</code></pre>

<h4>addExpression</h4>

<pre><code>$query-&gt;addExpression('IFNULL(count1, 0)+IFNULL(count2, 0)','total_count');

$query-&gt;addExpression('SUM(clickCount)', 'total_count');
</code></pre>

<h4>join</h4>

<p>預設join的型態為inner join, 有提供<code>join()</code>, <code>innerJoin()</code>, <code>leftJoin()</code>, or <code>rightJoin()</code>的方法</p>

<pre><code>$query = db_select('node', 'n');
$table_alias = $query-&gt;join('users', 'u', 'n.uid = u.uid AND u.uid = :uid');
// node table join user talbe on uid
</code></pre>

<h4>SubQuery</h4>

<pre><code>$subquery_customlog = db_select('customlog', 'clg')-&gt;fields('clg', array('nid'));
$subquery_customlog-&gt;addExpression('COUNT(*)', 'count');
$subquery_customlog-&gt;groupBy('clg.nid');
$query = db_select('node','n')-&gt;fields('n', array('nid','title'));
$query-&gt;leftJoin( $subquery_customlog, 'c_count' ,'c_count.nid = n.nid');
...
// 自行產生所需的table後, 再Join到另一個table
</code></pre>

<h4>Extender</h4>

<p>tablesort和pager</p>

<pre><code>$query-&gt;extend('TableSort')
      -&gt;orderByHeader($header);
// Sorting Extender, 依照表格的Header排序

$query-&gt;extend('PagerDefault')
      -&gt;limit(10);
// Pager Extender
</code></pre>

<h3>Static Query</h3>

<pre><code>$result = db_query("SELECT nid, title FROM {node} WHERE type = :type", array( ':type' =&gt; 'page',));
</code></pre>

<h3>Show Query String and Arguments</h3>

<p>顯示Drupal產生的SQL子句和參數</p>

<pre><code>echo $query-&gt;__toString() . "\n";
// Get query string
$args = $query-&gt;getArguments();
var_dump($args);
// Get the arguments passed to the string
</code></pre>

<h2>EntityFieldQuery</h2>

<p>取得Entity相關的資料, 在Drupal中Entity指的是node, user, taxonomy term, comment&hellip;等。回傳值是和entity相關的ID值，必須另外使用entity_load讀取entity其他資料。</p>

<p>和Basic API相比，優勢在於能使用較複雜的過濾條件得到想要的entity資料；和Database API相比，優勢在於直接以entity觀點看資料，直覺性較強，有一個小缺點是EntityFieldQuery若要同時取得兩個entity的資訊，很難使用join的概念處理。</p>

<pre><code>$query = new EntityFieldQuery();

$query-&gt;entityCondition('entity_type', 'node')
      -&gt;entityCondition('bundle', 'article')
      -&gt;propertyCondition('status', NODE_PUBLISHED)
      -&gt;fieldCondition('field_news_types', 'value', 'spotlight', '=')
      -&gt;fieldCondition('field_news_publishdate', 'value', $year . '%', 'like')-&gt;fieldCondition('field_news_publishdate', 'value', $year . '%', 'like')
      -&gt;fieldOrderBy('field_photo', 'fid', 'DESC')
      -&gt;range(0, 10);

$result = $query-&gt;execute();

if (isset($result['node'])) {
  $news_items_nids = array_keys($result['node']);
  $news_items = entity_load('node', $news_items_nids);
}
</code></pre>

<h2>Ref.</h2>

<ul>
<li><a href="https://api.drupal.org/api/drupal/modules%21node%21node.module/function/node_load/7">node_load</a></li>
<li><a href="https://api.drupal.org/api/drupal/modules%21user%21user.module/function/user_load/7">user_load</a></li>
<li><a href="https://api.drupal.org/api/drupal/modules%21taxonomy%21taxonomy.module/function/taxonomy_term_load/7">taxonomy_term_load</a></li>
<li><a href="https://api.drupal.org/api/drupal/modules%21comment%21comment.module/function/comment_load/7">comment_load</a></li>
<li><a href="https://www.drupal.org/dynamic-queries">Dynamic queries</a></li>
<li><a href="https://www.drupal.org/node/310072">Static queries</a></li>
<li><a href="https://www.drupal.org/node/1343708">How to use EntityFieldQuery</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Config Static IP in Ubuntu]]></title>
    <link href="http://j2hongming.github.io/blog/2016/03/02/config-static-ip-in-ubuntu/"/>
    <updated>2016-03-02T16:48:33+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/03/02/config-static-ip-in-ubuntu</id>
    <content type="html"><![CDATA[<ul>
<li>設定network interface</li>
<li>重新讀取網路設定</li>
</ul>


<!-- more -->


<h2>設定network interface</h2>

<pre><code>$ vim /etc/network/interfaces
# 加上下面IP設定(address, netmask, gateway要看當時環境而定)
iface eth0 inet static
address 192.168.7.151
netmask 255.255.255.0
gateway 192.168.7.1
</code></pre>

<h2>重新讀取網路設定</h2>

<pre><code>$ sudo /etc/init.d/networking restart
</code></pre>

<ul>
<li><a href="http://note.drx.tw/2008/02/ubuntu-ip.html">凍仁的筆記: Ubuntu 網路設定 - 固定 IP</a></li>
<li><a href="http://www.arthurtoday.com/2010/08/ubuntu-ip.html">Ubuntu 如何設定固定 IP ( 設定網路 )</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Check Hardware Information in Ubuntu]]></title>
    <link href="http://j2hongming.github.io/blog/2016/03/02/check-hardware-information-in-ubuntu/"/>
    <updated>2016-03-02T16:17:19+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/03/02/check-hardware-information-in-ubuntu</id>
    <content type="html"><![CDATA[<ul>
<li>CPU</li>
<li>RAM</li>
<li>HD</li>
<li>MAC Adress</li>
</ul>


<!-- more -->


<h2>CPU</h2>

<pre><code>lscpu
# Architecture:          x86_64
# CPU op-mode(s):        32-bit, 64-bit
# Byte Order:            Little Endian
# ...

cat /proc/cpuinfo
# processor       : 0
# vendor_id       : GenuineIntel
# cpu family      : 6
# model           : 37
# model name      : Intel(R) Xeon(R) CPU E5-2670 0 @ 2.60GHz
# ...
</code></pre>

<ul>
<li><a href="http://www.binarytides.com/linux-cpu-information/">8 commands to check cpu information on Linux</a></li>
<li><a href="http://www.cyberciti.biz/faq/ubuntu-cpu-information/">Ubuntu: Find CPU Information / Speed</a></li>
<li><a href="http://www.binarytides.com/linux-check-processor/">How to check processor and cpu details on Linux</a></li>
</ul>


<h2>RAM</h2>

<h3>可用記憶體大小</h3>

<pre><code>free -m
</code></pre>

<h3>詳細資料</h3>

<pre><code>cat /proc/meminfo
</code></pre>

<h3>時脈和DDR</h3>

<pre><code>sudo dmidecode --type 17
</code></pre>

<ul>
<li><a href="http://www.cyberciti.biz/faq/check-ram-in-ubuntu/">HowTo: Check RAM Size In Ubuntu Linux</a></li>
<li><a href="http://www.cyberciti.biz/faq/linux-ram-info-command/">Find Linux RAM Information Command</a></li>
</ul>


<h2>Hard Drive</h2>

<h3>Check Partitions</h3>

<pre><code>fdisk -l

df
</code></pre>

<h3>Lists out all the storage blocks</h3>

<pre><code>lsblk

hwinfo
</code></pre>

<h3>Other</h3>

<pre><code>ls /dev/disk/by-id

cat /sys/block/sda/device/model
</code></pre>

<ul>
<li><a href="http://www.linuxjournal.com/content/tech-tip-retrieve-disk-info-command-line">Tech Tip: Retrieve Disk Info from the Command Line | Linux Journal</a></li>
<li><a href="http://www.binarytides.com/linux-command-check-disk-partitions/">9 commands to check hard disk partitions and disk space on Linux</a></li>
</ul>


<h2>MAC Adress</h2>

<pre><code>ifconfig -a
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Notes for Vim]]></title>
    <link href="http://j2hongming.github.io/blog/2016/02/19/notes-for-vim/"/>
    <updated>2016-02-19T11:28:15+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/02/19/notes-for-vim</id>
    <content type="html"><![CDATA[<ul>
<li>概念Concept</li>
<li>基本Basic</li>
<li>組合技Combo</li>
</ul>


<!--more-->


<h2>概念Concept</h2>

<ul>
<li>模式</li>
<li>單檔案</li>
<li>單行</li>
<li>單詞</li>
<li>單檔案</li>
</ul>


<h3>模式</h3>

<p>Command Line mode, Normal mode, Insert mode, 預設在Normal mode</p>

<p>Nm to Im: <code>i</code></p>

<p>Nm to CLm:<code>:</code></p>

<p>Im to Nm:<code>esc</code></p>

<h2>基本Basic</h2>

<h3>存檔</h3>

<h4>CL mode</h4>

<pre><code>w #存檔
q #離開
wq #存檔並離開
q! #不存檔強制離開
</code></pre>

<h3>瞬間移動</h3>

<h4>N mode</h4>

<h5>搜尋</h5>

<pre><code>/ #搜尋
n #下一個符合
N #上一個符合
</code></pre>

<h5>檔案觀點</h5>

<pre><code>gg #檔頭
G #檔尾
j5 #往下移動5行, 5可改為任意數字
</code></pre>

<h5>行觀點</h5>

<pre><code>0 #行內移動: 行首
^ #行內移動: 行首
$ #行內移動: 行尾
f #行內字元搜尋: 往後
F #行內字元搜尋: 往前
</code></pre>

<h5>詞觀點</h5>

<pre><code>w #單詞移動: 下一單詞之詞頭
e #單詞移動: 下一單詞之詞尾
b #單詞移動: 上一單詞之詞頭
</code></pre>

<h4>CL mode</h4>

<pre><code>0 #檔頭
$ #檔尾
n #跳到第n行
</code></pre>

<h3>標記與複製</h3>

<h4>N mode</h4>

<pre><code>v #選取
V #標記行
Ctrl + v #標記區塊
y #複製標記內容
yy #複製游標行
p #在下一行貼上複製或刪除的內容
P #在上一行貼上複製或刪除的內容
</code></pre>

<h3>刪除與復原</h3>

<h4>N mode</h4>

<pre><code>dd #刪除一行
D #刪除至行尾
u #復原
Ctrl + r #重做
</code></pre>

<h2>組合技Combo</h2>

<h3>N mode</h3>

<h4>CP大法</h4>

<pre><code>yy p #複製單行貼上
</code></pre>

<h4>快速刪除</h4>

<pre><code>d f 字元 #刪除當時游標所在到到該字元前
</code></pre>

<h2>參考資源</h2>

<ul>
<li><a href="http://www.slideshare.net/BruceLi2/008-vim">vim超基礎入門</a></li>
<li><a href="http://blog.eddie.com.tw/2012/04/27/screencast-1-learning-vim-from-the-beginning/">爽爽快快學Vim(1)</a></li>
<li><a href="http://blog.vgod.tw/2009/12/08/vim-cheat-sheet-for-programmers/">給程式設計師的Vim入門圖解說明</a></li>
<li><a href="http://blog.linux.org.tw/~jserv/archives/001675.html">vi / vim 圖解鍵盤指令</a></li>
<li><a href="http://www.slideshare.net/taichunmin/ss-16096723">寫程式？那些老師沒教的事</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Github Pages With Octopress]]></title>
    <link href="http://j2hongming.github.io/blog/2016/02/18/github-pages-with-octopress/"/>
    <updated>2016-02-18T17:29:01+08:00</updated>
    <id>http://j2hongming.github.io/blog/2016/02/18/github-pages-with-octopress</id>
    <content type="html"><![CDATA[<ul>
<li>建置Octopress</li>
<li>設定佈署到 github</li>
<li>網站設定</li>
<li>內容管理</li>
</ul>


<!-- more -->


<h2>建置Octopress</h2>

<h2>設定佈署到 github</h2>

<pre><code>rake setup_github_pages
</code></pre>

<p>輸入自己的Github Pages repository url
git@github.com:your_username/your_username.github.io.git</p>

<h2>網站設定</h2>

<p><a href="http://octopress.org/docs/configuring/">Configuring Octopress</a></p>

<h2>內容管理</h2>

<p>Octopress的網頁內容是使用<a href="http://markdown.tw/">Markdown語法</a>
Blog的文章會被存放在source/_posts, 以Jekyll&rsquo;s naming conventions:YYYY-MM-DD-post-title.markdown來命名</p>

<h3>如何在Octopress分享程式碼</h3>

<h4>markdown方法</h4>

<pre><code>若為區塊程式碼, 使用4個空白或1個tab
若為行內程式碼, 使用反引號 `
</code></pre>

<h4>octopress方法</h4>

<p><a href="http://octopress.org/docs/blogging/code/">Sharing Code Snippets in Octopress</a></p>

<h3>常用指令</h3>

<p>建立新文章</p>

<pre><code>rake new_post["標題"]
#保存在 source/_posts/日期-標題.markdown
</code></pre>

<p>建立新頁面</p>

<pre><code>rake new_page[super-awesome]
#creates /source/super-awesome/index.markdown
#保存在anywhere in your blog source directory

rake new_page[super-awesome/page.html]
# creates /source/super-awesome/page.html 
</code></pre>

<p>產生網站檔案</p>

<pre><code>rake generate
# Generates posts and pages into the public directory
</code></pre>

<p>發佈到 GitHub</p>

<pre><code>rake deploy
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Drupal 7 + Memcached on CentOS 6]]></title>
    <link href="http://j2hongming.github.io/blog/2015/07/24/drupal-7-plus-memcached-on-centos-6/"/>
    <updated>2015-07-24T17:24:34+08:00</updated>
    <id>http://j2hongming.github.io/blog/2015/07/24/drupal-7-plus-memcached-on-centos-6</id>
    <content type="html"><![CDATA[<ul>
<li>安裝Memcached</li>
<li>設定Memcached</li>
<li>安裝Memcached PHP extension(PECL Memcache)</li>
<li>設定Memcached PHP extension</li>
<li>安裝Drupal 7 memcache 模組</li>
<li>設定Drupal 7 setting.php</li>
<li>注意事項</li>
</ul>


<!-- more -->


<h2>Memcached</h2>

<h3>安裝Memcached</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum install memcached</span></code></pre></td></tr></table></div></figure>


<h3>設定Memcached</h3>

<p>設定 /etc/sysconfig/memcached
注意OPTIONS=&ldquo;-l 127.0.0.1&rdquo;</p>

<h2>Memcached PHP extension</h2>

<h3>安裝Memcached PHP extension</h3>

<p>指定版本</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo pecl install channel://pecl.php.net/memcache-3.0.6</span></code></pre></td></tr></table></div></figure>


<h3>設定Memcached PHP extension</h3>

<p>設定/etc/php.d/memcache.ini</p>

<p>開啟hash相關設定</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>memcache.hash\_strategy=consistent</span></code></pre></td></tr></table></div></figure>


<h2>Drupal 7</h2>

<h3>安裝Drupal 7 memcache 模組</h3>

<p><a href="https://www.drupal.org/project/memcache">Memcache API and Integration</a></p>

<h3>設定Drupal 7 setting.php</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$conf['cache_backends'][] = 'sites/all/modules/memcache/memcache.inc';
</span><span class='line'>// The 'cache_form' bin must be assigned no non-volatile storage.
</span><span class='line'>$conf['cache_class_cache_form'] = 'DrupalDatabaseCache';
</span><span class='line'>$conf['cache_default_class'] = 'MemCacheDrupal';
</span><span class='line'>$conf['memcache_key_prefix'] = 'something_unique';
</span><span class='line'>// Don't bootstrap the database when serving pages from the cache.
</span><span class='line'>$conf['page_cache_without_database'] = TRUE;
</span><span class='line'>$conf['page_cache_invoke_hooks'] = FALSE;
</span><span class='line'>
</span><span class='line'>$conf['memcache_stampede_protection'] = TRUE;
</span><span class='line'>$conf['lock_inc'] = 'sites/all/modules/memcache/memcache-lock.inc';</span></code></pre></td></tr></table></div></figure>


<h2>注意事項</h2>

<ol>
<li>若memcache service有起來，Druapl卻沒連到，注意防火牆設定</li>
</ol>


<h2>Ref</h2>

<ul>
<li><a href="https://www.drupal.org/node/1131468">Drupal 7 Memcache Tutorial</a>
大致流程說明</li>
<li><a href="http://tag1consulting.com/blog/memcache-centos-fedora">Memcached and PECL memcache on CentOS and Fedora</a>
CentOS安裝注意事項</li>
<li><a href="http://www.tecmint.com/install-memcached-caching-server-on-rhel-centos-fedora/">Install Memcached (Caching Server) on RHEL/CentOS 6.3/5.8 and Fedora 17-12</a>
安裝流程與指令(推薦)</li>
<li><a href="http://chimera.labs.oreilly.com/books/1230000000845/ch16.html">Chapter 16. Alternative Storage and Cache Backends</a>
觀念</li>
<li><a href="http://www.hellosanta.com.tw/Drupal%E7%B6%B2%E7%AB%99%E8%A8%AD%E8%A8%88/drupal-memcached">Drupal Memcached中文教學</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux指令歷史紀錄]]></title>
    <link href="http://j2hongming.github.io/blog/2014/10/20/linux-command-history/"/>
    <updated>2014-10-20T17:09:32+08:00</updated>
    <id>http://j2hongming.github.io/blog/2014/10/20/linux-command-history</id>
    <content type="html"><![CDATA[<h2>方法一</h2>

<p><code>Ctrl + r</code>: 搜尋指令歷史紀錄，進入<strong>(reverse-i-search)</strong>模式</p>

<!-- more -->


<p>在<strong>reverse-i-search</strong>下，輸入關鍵字</p>

<ul>
<li><code>Enter</code>: 直接執行此指令</li>
<li><code>左右鍵</code>: 跳回一般命令提示字元</li>
<li><code>Ctrl + r</code>: 下一個</li>
</ul>


<h2>方法二</h2>

<ul>
<li><code>history | more</code></li>
<li><code>!n</code>: n為history的輸出編號</li>
<li><code>!keyword</code>: keyword為指定之關鍵字</li>
<li><code>history n</code>:  列出最近n個使用的指令</li>
</ul>


<h2>Ref.</h2>

<ol>
<li><a href="http://www.gtwang.org/2013/10/mastering-linux-command-line-history.html">Linux 指令歷史紀錄（History）的操作教學與範例</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[部落格開張Markdown Demo]]></title>
    <link href="http://j2hongming.github.io/blog/2014/10/16/bu-luo-ge-kai-zhang/"/>
    <updated>2014-10-16T16:22:49+08:00</updated>
    <id>http://j2hongming.github.io/blog/2014/10/16/bu-luo-ge-kai-zhang</id>
    <content type="html"><![CDATA[<ul>
<li>Sharing Code Snippets</li>
<li>Quote</li>
<li>List</li>
<li>Email</li>
<li>Atx Format Header</li>
<li>Setext Format Header</li>
<li>Break Line</li>
<li>Link</li>
</ul>


<!-- more -->


<p><a href="http://markdown.tw/">Markdown Syntax</a></p>

<h2>Sharing Code Snippets</h2>

<h3>Example  1</h3>

<figure class='code'><figcaption><span>PHP echo-hello.php</span><a href='http://php.net/manual/en/function.echo.php'>link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">echo</span> <span class="s1">&#39;部落格開張&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example  2</h3>

<p><a href="http://octopress.org/docs/blogging/code/">Octopress: Sharing Code Snippets</a></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;h1&gt;</span>My First Heading<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>My first paragraph.<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 3</h3>

<p><a href="http://octopress.org/docs/blogging/code/">Octopress: Sharing Code Snippets</a></p>

<blockquote><p>&#8220;` [language] [title] [url] [link text]
code snippet
&#8220;`</p></blockquote>

<figure class='code'><figcaption><span>Discover if a number is prime</span><a href='http://www.noulakaz.net/weblog/2007/03/18/a-regular-expression-to-check-for-prime-numbers/'>Source Article</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Fixnum</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">prime?</span>
</span><span class='line'>    <span class="p">(</span><span class="s1">&#39;1&#39;</span> <span class="o">*</span> <span class="nb">self</span><span class="p">)</span> <span class="o">!~</span> <span class="sr">/^1?$|^(11+?)\1+$/</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 4: gist embed</h3>

<p>{ % gist 89c858fdf4fd510fd910787a64eb9f04 % }</p>

<div><script src='https://gist.github.com/89c858fdf4fd510fd910787a64eb9f04.js'></script>
<noscript><pre><code>&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
// ERROR, and show error message in console 
var url = &quot;http://data.tycg.gov.tw/api/v1/rest/datastore/a1b4714b-3b75-4ff8-a8f2-cc377e4eaa0f?format=json&quot;;
// SUCCESS
var url = 'http://ptx.transportdata.tw/MOTC/v1/Bus/EstimatedTimeOfArrival/Thb?%24format=json&amp;$top=10';

$.ajax({
   url: url,
   type: &quot;GET&quot;,
   dataType: &quot;JSON&quot;,
   success: function(data, textStatus, request) {
     alert(&quot;SUCCESS!!!&quot;);
     console.log(data);
   },
   error: function() {
     alert(&quot;ERROR!!!&quot;);
   }
 });

&lt;/script&gt;</code></pre></noscript></div>


<h2>Quote</h2>

<h3>Example 1</h3>

<p><a href="http://octopress.org/docs/plugins/blockquote/">Octopress: Blockquote</a></p>

<blockquote><p>Stay hungry, Stay foolish. -Steve Jobs</p>

<p>A apple a day, keep the doctor away</p>

<blockquote><p>May I help U?</p></blockquote>

<ol>
<li>First
Line</li>
<li>Two
Line</li>
</ol>
</blockquote>

<h3>Example 2</h3>

<blockquote><p>Flying is learning how to throw yourself at the ground and miss.</p><footer><strong>Douglas Adams</strong> <cite>The Hichhikers Guide to the Galaxy</cite></footer></blockquote>


<h2>List</h2>

<h3>Example</h3>

<h4>TODO List</h4>

<ul>
<li>open</li>
<li><em>hadle em</em></li>
<li><strong>*strong*</strong>

<ol>
<li>s1</li>
<li>s2</li>
<li>s3</li>
</ol>
</li>
</ul>


<h2>Email</h2>

<h3>Example</h3>

<p><a href="&#x6d;&#x61;&#x69;&#108;&#116;&#111;&#x3a;&#97;&#x64;&#100;&#114;&#101;&#115;&#115;&#x40;&#x65;&#x78;&#x61;&#x6d;&#112;&#x6c;&#101;&#46;&#x63;&#x6f;&#x6d;">&#x61;&#x64;&#x64;&#114;&#101;&#115;&#x73;&#64;&#101;&#120;&#97;&#109;&#112;&#x6c;&#101;&#46;&#x63;&#111;&#109;</a></p>

<h1>Atx format Header L1</h1>

<h2>Example</h2>

<h2>Header L2</h2>

<h3>Header L3</h3>

<h4>Header L4</h4>

<h5>Header L5</h5>

<h6>Header L6</h6>

<h1>This is an Setext Format  H1</h1>

<h3>Example</h3>

<h2>This is an  Setext Format  H2</h2>

<h1>Break Line</h1>

<h2>Example</h2>

<p>BreakLine</p>

<hr />

<hr />

<hr />

<h1>Link</h1>

<h3>Example 1: Inline</h3>

<p>This is <a href="http://example.com/" title="Title">an example</a> inline link.</p>

<h3>Example 2: Ref</h3>

<p>This is <a href="http://example.com/" title="Optional Title Here">an example</a> reference-style link.</p>
]]></content>
  </entry>
  
</feed>
